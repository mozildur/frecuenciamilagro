<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#7b1fa2" />
  <meta name="description" content="Frecuencia Milagro: estación de radio espiritual con música, frases y transmisiones en vivo que te reconecta con tu paz interior. Escúchala ahora." /> <link rel="manifest" href="/manifest.json">
<link rel="icon" href="/icons/icon-192.png" sizes="192x192">
<link rel="apple-touch-icon" href="/icons/icon-192.png">
<meta name="theme-color" content="#7b1fa2">

  
  
  <title>Frecuencia Milagro</title>

  <!-- Open Graph -->
  <meta property="og:title" content="Frecuencia Milagro – Explorando Un Curso de Milagros con MoZ" />
  <meta property="og:description" content="Estación de radio espiritual con música, frases y transmisiones en vivo para reconectar con tu paz interior." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://frecuenciamilagro.com" />
  <meta property="og:image" content="https://raw.githubusercontent.com/mozildur/frecuenciamilagro/main/logo.png" />
  <meta property="og:image:alt" content="Logo Frecuencia Milagro" />
  <meta property="og:site_name" content="Frecuencia Milagro" />

  <!-- Twitter card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Frecuencia Milagro – Explorando Un Curso de Milagros con MoZ" />
  <meta name="twitter:description" content="Estación de radio espiritual con música, frases y testimonios para reconectar con tu paz interior." />
  <meta name="twitter:image" content="https://raw.githubusercontent.com/mozildur/frecuenciamilagro/main/logo.png" />
  <meta name="twitter:site" content="@MoZIldur" />

  <link rel="canonical" href="https://frecuenciamilagro.com" />
  <link rel="preconnect" href="https://raw.githubusercontent.com" />
  <link rel="preload" as="image" href="https://raw.githubusercontent.com/mozildur/frecuenciamilagro/main/logo.png" />

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "RadioStation",
    "name": "Frecuencia Milagro",
    "url": "https://frecuenciamilagro.com",
    "description": "Estación de radio espiritual con música, frases y transmisiones en vivo sobre Un Curso de Milagros.",
    "image": "https://raw.githubusercontent.com/mozildur/frecuenciamilagro/main/logo.png",
    "broadcastFrequency": "Online",
    "genre": "Espiritualidad",
    "sameAs": [
      "https://www.youtube.com/@MoZIldur",
      "https://www.instagram.com/primeratencion"
    ]
  }
  </script>

  <style>
    :root {
      --bg1: #fce3ff;
      --bg2: #d6f0ff;
      --primary: #7b1fa2;
      --text: #3e006b;
      --card-bg: #ffffffee;
      --radius: 12px;
      --focus-outline: #ffdd57;
      --transition: .35s ease;
    }
    .dark {
      --bg1: #1f1a2b;
      --bg2: #2e2a45;
      --primary: #d3a1ff;
      --text: #eee;
      --card-bg: rgba(40,35,60,.9);
      --focus-outline: #ffd36b;
    }
    * { box-sizing:border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--bg1) 0%, var(--bg2) 100%);
      color: var(--text);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      transition: background var(--transition), color var(--transition);
    }
    a { color: inherit; }
    img#logo {
      max-width: 220px;
      width: 100%;
      margin: 20px auto 5px;
      display: block;
      border-radius: 8px;
    }
    h1 {
      font-size: clamp(2rem, 3vw, 2.8rem);
      margin: 4px 0 6px;
      color: var(--primary);
      line-height: 1.1;
      text-align: center;
    }
    .section {
      width: 100%;
      max-width: 960px;
      padding: 0 12px;
    }
    #play-button, #donate-button {
      min-height: 44px;
    }
    #play-button {
      background-color: #ff4081;
      color: white;
      border: none;
      padding: 18px 40px;
      font-size: 2rem;
      border-radius: 14px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      transition: var(--transition);
      box-shadow: 0 10px 30px -5px rgba(255,64,129,.4);
    }
    #play-button:hover { filter: brightness(1.05); }
    #play-button:active { transform: scale(.97); }

    #donate-button {
      background: #ffdd57;
      color: #3e006b;
      border: none;
      padding: 14px 24px;
      font-size: 1.1rem;
      border-radius: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 700;
      transition: var(--transition);
      box-shadow: 0 8px 25px -5px rgba(255,221,87,.6);
      text-decoration: none;
    }
    #donate-button:hover { filter: brightness(1.05); }

    .share-buttons {
      margin: 6px auto 0;
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      font-size: .9rem;
    }
    .share-buttons a {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.85);
      text-decoration: none;
      color: var(--text);
      font-weight: 600;
      box-shadow: 0 6px 16px -2px rgba(0,0,0,.1);
      transition: transform .2s ease;
    }
    .share-buttons a:hover { transform: scale(1.03); }

    .now-playing-label {
      font-size: 1.6rem;
      font-weight: bold;
      color: #d8b4ff;
      margin: 12px 0 4px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
    }
    .now-playing-flex {
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 6px;
    }
    #sonic_art {
      width: 100px;
      height: 100px;
      border-radius: 14px;
      overflow: hidden;
      background: rgba(255,255,255,.9);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px -3px rgba(0,0,0,.1);
      flex-shrink: 0;
      position: relative;
    }
    #sonic_art img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    #sonic_title {
      font-size: 1.9rem;
      font-weight: 700;
      color: var(--text);
      max-width: 600px;
      line-height: 1.1;
      padding: 6px 10px;
      background: var(--card-bg);
      border-radius: 10px;
      min-height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      word-break: break-word;
    }

    .playlist-link, .subtitle,
    #sonic_history, .horarios, .social-links, .credits {
      margin: 12px auto;
      max-width: 960px;
      width: calc(100% - 24px);
    }
    .playlist-link { font-size: 1rem; color: #9c64b5; }
    .playlist-link a { text-decoration: underline; }

    h2.subtitle {
      font-size: 1.6rem;
      font-weight: bold;
      color: #b39ddb;
      margin: 25px 0 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Historial estilo cápsulas */
    .history-wrapper {
      overflow-x: auto;
      padding-bottom: 4px;
      margin-top: 6px;
    }
    .history-item {
      background: var(--card-bg);
      padding: 8px 14px;
      border-radius: 999px;
      font-size: .9rem;
      white-space: nowrap;
      box-shadow: 0 6px 18px -4px rgba(0,0,0,.08);
      position: relative;
      transition: transform .3s ease, background .3s ease;
      margin-right: 6px;
      display: inline-block;
    }
    .history-item.current {
      background: #ffe3f7;
      font-weight: 700;
    }
    #sonic_history {
      background: var(--card-bg);
      padding: 16px;
      border-radius: var(--radius);
      min-height: 100px;
      line-height: 1.3;
      font-size: 1rem;
    }

    /* Inspiración */
    .inspiration {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 14px;
      margin-top: 8px;
    }
    .card-small {
      background: var(--card-bg);
      padding: 16px 18px;
      border-radius: 14px;
      box-shadow: 0 12px 30px -8px rgba(0,0,0,.08);
      position: relative;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      font-size: 1rem;
      line-height: 1.2;
    }
    .card-small .label {
      font-weight: 700;
      margin-bottom: 6px;
    }

    .horarios, .social-links, .credits {
      background: rgba(255,255,255,.95);
      padding: 16px;
      border-radius: var(--radius);
      font-size: 1rem;
      text-align: left;
      line-height: 1.4;
    }
    .dark .horarios, .dark .social-links, .dark .credits {
      background: rgba(30,25,50,.9);
    }
    .social-links a { font-weight: 600; text-decoration: none; color: var(--text); }
    .social-links a:hover { text-decoration: underline; }

    #sonic_listeners {
      font-size: 1.6rem;
      font-weight: 800;
      margin-left: 6px;
    }

    .badge {
      background: rgba(123,31,162,.1);
      padding: 4px 10px;
      border-radius: 999px;
      font-size: .75rem;
      display: inline-block;
      margin-right:6px;
    }

    /* animaciones */
    .fade-change {
      animation: fadeChange .4s ease-out;
    }
    @keyframes fadeChange {
      0% { opacity: 0; transform: scale(.97); }
      100% { opacity: 1; transform: scale(1); }
    }
    .cover-pulse {
      animation: pulse .6s ease-out;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }

    /* foco accesible claro */
    :focus-visible {
      outline: 3px solid var(--focus-outline);
      outline-offset: 3px;
    }

    /* skip link */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 8px;
      background: #fff;
      color: #3e006b;
      padding: 8px 12px;
      border-radius: 6px;
      font-weight: 600;
      z-index: 50;
      transition: top .2s ease;
      text-decoration: none;
    }
    .skip-link:focus {
      top: 8px;
    }

    /* parche modo oscuro: contraste en compartir y oyentes */
    .dark .share-buttons a {
      background: rgba(255,255,255,0.12);
      color: #fff;
    }
    .dark .share-buttons a:hover {
      background: rgba(255,255,255,0.2);
    }
    .dark #listener-section > div {
      background: rgba(255,255,255,0.08) !important;
    }
    .dark #listener-section div {
      color: #fff;
    }
    .dark #sonic_listeners {
      color: #fff;
    }

    @media (max-width: 850px) {
      #play-button, #donate-button { padding: 14px 28px; font-size: 1.8rem; }
      #sonic_title { font-size: 1.5rem; }
      h1 { font-size: 2.2rem; }
    }
    @media (max-width: 500px) {
      #play-button, #donate-button { width: 100%; }
      #sonic_title { font-size: 1.2rem; }
    }
    @media (prefers-reduced-motion: reduce) {
      * { transition: none !important; animation: none !important; }
    }
  </style>

  <script id="sonic_js" data-port="8012" src="https://play.wrhradios.com/cp/widgets.js?r=306" defer></script>
</head>
<body>
  <a href="#main" class="skip-link">Saltar al contenido</a>
  <header class="section" aria-label="Encabezado principal">
    <img id="logo" src="https://raw.githubusercontent.com/mozildur/frecuenciamilagro/main/logo.png" alt="Logo Frecuencia Milagro" loading="lazy" fetchpriority="high">
    <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap; justify-content:center;">
      <h1 style="margin:0;">📻✨ Frecuencia Milagro ✨🎶</h1>
      <button id="theme-toggle" aria-label="Cambiar tema" aria-pressed="false" style="background:none;border:none;cursor:pointer;font-size:1.4rem;display:inline-flex;align-items:center;gap:6px;">
        🌙
      </button>
    </div>

    <div class="share-buttons" aria-label="Compartir estación">
      <a href="https://wa.me/?text=Estoy%20escuchando%20Frecuencia%20Milagro%2C%20%C3%A9chale%20un%20o%C3%ADdo%3A%20https%3A%2F%2Ffrecuenciamilagro.com" target="_blank" rel="noopener" aria-label="Compartir en WhatsApp">
        🟢 WhatsApp
      </a>
      <a href="https://twitter.com/intent/tweet?text=Estoy+escuchando+Frecuencia+Milagro%2C+%C3%A9chale+un+o%C3%ADdo&url=https%3A%2F%2Ffrecuenciamilagro.com" target="_blank" rel="noopener" aria-label="Compartir en X">
        🐦 X
      </a>
      <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ffrecuenciamilagro.com&quote=Estoy%20escuchando%20Frecuencia%20Milagro%2C%20%C3%A9chale%20un%20o%C3%ADdo" target="_blank" rel="noopener" aria-label="Compartir en Facebook">
        📘 Facebook
      </a>
    </div>

    <div id="listener-section" style="margin-top:8px; text-align:center;">
      <div style="display:inline-flex; align-items:center; gap:8px; background: rgba(255,255,255,.95); padding:8px 14px; border-radius:10px; box-shadow:0 6px 16px -2px rgba(0,0,0,.1);">
        <div style="font-weight:700; font-size:1.1rem;">👥 Oyentes en vivo ahora:</div>
        <div id="sonic_listeners" aria-live="polite">—</div>
      </div>
    </div>
  </header>

  <main id="main" class="section" aria-label="Contenido principal">
    <div class="now-playing-label">🎧 Ahora suena:</div>
    <div class="now-playing-flex" aria-label="Información de la canción actual">
      <div id="sonic_art" aria-label="Cover de la canción actual">
        <span style="font-size:.6rem;color:#666;">Cover</span>
      </div>
      <div id="sonic_title" aria-live="polite" aria-label="Título de la canción en reproducción">
        Cargando título... si no aparece en 3s, recarga.
      </div>
    </div>

    <!-- anuncio para lectores de pantalla -->
    <div id="sr-announcer" aria-live="polite" aria-atomic="true" style="position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;"></div>

    <!-- play + donar juntos -->
    <div style="margin-top:12px; display:flex; justify-content:center; gap:12px; flex-wrap:wrap;">
      <button id="play-button" aria-label="Reproducir o pausar estación">▶️ Escuchar Ahora</button>
      <a id="donate-button" href="https://paypal.me/primerotupaz" target="_blank" rel="noopener" aria-label="Donar a Frecuencia Milagro">
        💛 Donar
      </a>
    </div>
    <div style="font-size:.9rem; color:#444; margin-top:4px; text-align:center;">
      Apoya la frecuencia, tu donativo mantiene la paz sonando.
    </div>

    <div class="playlist-link">
      Puedes escuchar todas las canciones en la <a href="https://www.youtube.com/playlist?list=PLMepX0V6b8PGvI7NrXaTty9g7UT-I0rtl" target="_blank" rel="noopener">playlist de YouTube Music</a>.
    </div>

    <h2 class="subtitle">🎶 Las últimas 5 canciones:</h2>
    <div id="sonic_history" class="history-wrapper" aria-label="Historial de canciones">
      <div id="history_inner" style="display:flex; gap:8px;"></div>
    </div>

    <h2 class="subtitle">✨ Inspiración del día</h2>
    <div class="inspiration" aria-label="Frase milagrosa y testimonio">
      <div class="card-small" id="fraseCard" aria-live="polite">
        <div class="label">🌟 Frase Milagrosa</div>
        <div id="fraseAleatoria">Cargando...</div>
      </div>
      <div class="card-small" id="testimonioCard" aria-live="polite">
        <div class="label">💬 Testimonio</div>
        <div id="testimonioAleatorio">Cargando...</div>
      </div>
    </div>

    <div class="horarios">
      <div class="badge">En vivo</div>⏰ <strong>Transmisiones:</strong><br>
      📅 Lunes, martes y jueves - 13:00 hrs MEX: <em>Explorando Un Curso de Milagros</em><br>
      📅 Viernes - 13:00 hrs MEX: <em>Viernes Íntimo</em><br>
      📅 Lunes - 19:30 hrs MEX: <em>Clase UCDM con MoZ</em>
    </div>

    <div class="social-links">
      <strong>Contacto directo:</strong><br>
      📧 <a href="mailto:moz@primerotupaz.com">moz@primerotupaz.com</a> &nbsp;
      📱 <a href="https://wa.me/525522721399" target="_blank" rel="noopener">+52 552 272 1399</a>
    </div>
  </main>

  <footer class="section credits" aria-label="Créditos">
    Creado por MoZ con ayuda celestial (y un poco de HTML) © 2025
  </footer>

  <script>
    // tema: toggle + preferencia
    const themeToggle = document.getElementById('theme-toggle');
    const applyTheme = (theme) => {
      document.documentElement.classList.toggle('dark', theme === 'dark');
      themeToggle.textContent = theme === 'dark' ? '☀️' : '🌙';
      themeToggle.setAttribute('aria-pressed', theme === 'dark');
      localStorage.setItem('theme', theme);
    };
    const initTheme = () => {
      const stored = localStorage.getItem('theme');
      if (stored === 'dark' || stored === 'light') {
        applyTheme(stored);
      } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        applyTheme('dark');
      } else {
        applyTheme('light');
      }
    };
    themeToggle.addEventListener('click', () => {
      const isDark = document.documentElement.classList.contains('dark');
      applyTheme(isDark ? 'light' : 'dark');
    });
    initTheme();
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
      if (!localStorage.getItem('theme')) applyTheme(e.matches ? 'dark' : 'light');
    });

    // audio play/pause toggle
    const audio = new Audio("https://play.wrhradios.com/8012/stream");
    audio.preload = "auto";
    let playing = false;
    const btn = document.getElementById("play-button");
    function updateBtn() {
      btn.textContent = playing ? "⏸️ Pausar" : "▶️ Escuchar Ahora";
    }
    btn.addEventListener("click", async () => {
      try {
        if (playing) audio.pause();
        else await audio.play();
      } catch (e) {
        console.warn("Error al reproducir:", e);
        alert("No se pudo reproducir. Abre el stream directo en otra pestaña.");
      }
    });
    audio.addEventListener("play", () => { playing = true; updateBtn(); });
    audio.addEventListener("pause", () => { playing = false; updateBtn(); });
    audio.addEventListener("ended", () => { playing = false; updateBtn(); });

    // inspiración (frase + testimonio)
    const frases = [
      "No soy un cuerpo, soy libre.",
      "El amor no tiene opuestos.",
      "Nada real puede ser amenazado. Nada irreal existe. En esto radica la paz de Dios.",
      "El perdón es la llave de la felicidad.",
      "Todo lo que das te lo das a ti mismo.",
      "El miedo no es real."
    ];
    const testimonios = [
      "Desde que escucho Frecuencia Milagro, mis días comienzan con paz. – Laura",
      "Me acompaña en cada jornada, es mi cable a tierra. – José",
      "La música y los mensajes me recuerdan quién soy realmente. – Ana",
      "Gracias por esta estación, me reconecta con el amor. – Carlos",
      "Aquí encontré más que música, encontré propósito. – Sofía"
    ];
    const fraseEl = document.getElementById("fraseAleatoria");
    const testimonioEl = document.getElementById("testimonioAleatorio");
    function rotarInspiracion() {
      const fraseCard = document.getElementById("fraseCard");
      const testCard = document.getElementById("testimonioCard");
      fraseCard.classList.add("fade-change");
      testCard.classList.add("fade-change");
      setTimeout(() => {
        fraseEl.textContent = `🌟 Frase Milagrosa: "${frases[Math.floor(Math.random() * frases.length)]}"`;
        testimonioEl.textContent = `💬 Testimonio: ${testimonios[Math.floor(Math.random() * testimonios.length)]}`;
        fraseCard.classList.remove("fade-change");
        testCard.classList.remove("fade-change");
      }, 400);
    }
    rotarInspiracion();
    setInterval(rotarInspiracion, 30000);

    // estado previo para detectar cambios
    let lastPlaying = null;
    let lastArt = null;
    let lastHistory = [];

    const titleEl = document.getElementById("sonic_title");
    const artContainer = document.getElementById("sonic_art");
    const historyInner = document.getElementById("history_inner");
    const listenersEl = document.getElementById("sonic_listeners");
    const announcer = document.getElementById("sr-announcer");

    // fetch directo a SonicPlayer
    async function actualizarSonic() {
      try {
        const res = await fetch("https://play.wrhradios.com/cp/get_info.php?p=8012");
        if (!res.ok) throw new Error('no ok');
        const d = await res.json();

        // título
        if (d.title && d.title !== lastPlaying) {
          lastPlaying = d.title;
          titleEl.textContent = d.title;
          titleEl.classList.add("fade-change");
          setTimeout(() => titleEl.classList.remove("fade-change"), 400);
          announcer.textContent = `Nueva canción: ${d.title}`;
        }

        // cover
        if (d.art && d.art !== lastArt) {
          lastArt = d.art;
          const newImg = document.createElement("img");
          newImg.src = d.art;
          newImg.alt = "Cover de la canción";
          newImg.loading = "lazy";
          newImg.style.opacity = '0';
          newImg.style.position = 'absolute';
          newImg.style.top = '0';
          newImg.style.left = '0';
          newImg.style.width = '100%';
          newImg.style.height = '100%';
          newImg.style.objectFit = 'cover';
          newImg.classList.add('cover-pulse');
          const existing = artContainer.querySelector('img');
          artContainer.appendChild(newImg);
          requestAnimationFrame(() => {
            newImg.style.transition = 'opacity .4s ease';
            newImg.style.opacity = '1';
          });
          if (existing) {
            existing.style.transition = 'opacity .3s ease';
            existing.style.opacity = '0';
            setTimeout(() => {
              if (existing.parentElement) existing.remove();
            }, 400);
          }
          setTimeout(() => newImg.classList.remove('cover-pulse'), 600);
        }

        // historial
        const historyArr = Array.isArray(d.history) ? d.history.slice(0,5) : [];
        const changed = JSON.stringify(historyArr) !== JSON.stringify(lastHistory);
        if (changed) {
          lastHistory = historyArr;
          historyInner.innerHTML = '';
          historyArr.forEach((track, idx) => {
            const span = document.createElement('div');
            span.className = 'history-item';
            if (idx === 0) span.classList.add('current');
            span.textContent = track;
            historyInner.appendChild(span);
          });
        }

        // oyentes
        if (typeof d.listeners !== 'undefined') {
          listenersEl.textContent = d.listeners;
        } else if (typeof d.current_listeners !== 'undefined') {
          listenersEl.textContent = d.current_listeners;
        }
      } catch (e) {
        console.warn('No se pudo actualizar Sonic:', e);
      }
    }

    actualizarSonic();
    setInterval(actualizarSonic, 15000);
  </script>
</body>
</html>
